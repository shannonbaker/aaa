<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Manipulation</title>
</head>
<body>
    <input type="file" id="imageInput" accept="image/*">
    <canvas id="canvas" width="400" height="400"></canvas>
    <button id="manipulateButton">Grayscale</button>

    <script>
        // Function to manipulate the image (in this case, grayscale)
        function grayscaleImage(context, width, height) {
            const imageData = context.getImageData(0, 0, width, height);
            const data = imageData.data;

            for (let i = 0; i < data.length; i += 4) {
                const red = data[i];
                const green = data[i + 1];
                const blue = data[i + 2];

                // Convert the pixel to grayscale
                const grayscale = 0.299 * red + 0.587 * green + 0.114 * blue;

                data[i] = data[i + 1] = data[i + 2] = grayscale;
            }

            context.putImageData(imageData, 0, 0);
        }

        // Handle image upload and manipulation
        document.getElementById('imageInput').addEventListener('change', function (event) {
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');
            const image = new Image();

            image.onload = function () {
                canvas.width = image.width;
                canvas.height = image.height;
                context.drawImage(image, 0, 0);
            };

            image.src = URL.createObjectURL(event.target.files[0]);
        });

        // Handle manipulation button click
        document.getElementById('manipulateButton').addEventListener('click', function () {
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            grayscaleImage(context, width, height);
        });
    </script>
</body>
</html>
